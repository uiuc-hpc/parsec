extern "C" %{
#if   defined(PARSEC_HAVE_MPI)
#include <mpi.h>
#elif defined(PARSEC_HAVE_LCI)
#include <lc.h>
#endif
%}

NT
WS

PING(k)

k = 0 .. NT-1
: A(k % WS)

RW T <- (k ==0) ? A(k % WS) : T PING(k-1)
     -> (k< NT) ? T PING(k+1)
     -> A(k % WS)

; 0

BODY
    int r;
#if   defined(PARSEC_HAVE_MPI) 
	MPI_Comm_rank(MPI_COMM_WORLD, &r);
#elif defined(PARSEC_HAVE_LCI)
    lc_get_proc_num(&r);
#endif
	printf("%d: PING(%d)\n", r, k);
END
